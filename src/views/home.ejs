<!DOCTYPE html>
<html>
  <head>
    <title>OAuth 2.0 Verification Server</title>
    <style>
      body { font-family: system-ui, sans-serif; max-width: 900px; margin: 50px auto; padding: 20px; }
      .section { margin: 40px 0; }
      .section-title { font-size: 24px; font-weight: 600; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #007bff; }
      .card { border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin: 20px 0; }
      .card h3 { margin-top: 0; color: #333; }
      .btn { display: inline-block; padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 4px; }
      .btn:hover { background: #0056b3; }
      .btn-secondary { background: #6c757d; }
      .btn-secondary:hover { background: #5a6268; }
      code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; }
      pre { background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto; }
      .sub-section { margin-left: 20px; margin-top: 15px; }
      .note { font-size: 0.9em; color: #666; font-style: italic; margin-top: 8px; }
    </style>
  </head>
  <body>
    <h1>OAuth 2.0 Verification Server</h1>
    <p>This server helps verify OAuth 2.0 flows with Ory Hydra and UMS integration.</p>
    
    <!-- Client Management Section -->
    <div class="section">
      <h2 class="section-title">Client Management</h2>
      
      <div class="card">
        <h3>Global Clients Management (Hydra)</h3>
        <p>Manage all OAuth clients directly in Hydra. No identity filtering - shows all clients.</p>
        <a href="/clients" class="btn">Manage Global Clients</a>
        <p class="note">Uses Hydra Admin APIs directly</p>
      </div>
      
      <div class="card">
        <h3>Identity-Specific Clients Management (UMS)</h3>
        <p>Manage OAuth clients for a specific identity. Requires identity_id as input parameter.</p>
        <a href="/clients" class="btn">Manage Identity Clients</a>
        <p class="note">Uses UMS /oauth-apps/v1 endpoints with owner_identity_id parameter</p>
      </div>
    </div>
    
    <!-- OAuth Flows Section -->
    <div class="section">
      <h2 class="section-title">OAuth Flows</h2>
      
      <div class="card">
        <h3>Authorization Code Flow</h3>
        <p>Standard OAuth 2.0 authorization code flow with PKCE support.</p>
        <a href="/auth" class="btn">Start Authorization Code Flow</a>
      </div>
      
      <div class="card">
        <h3>Device Authorization Flow</h3>
        <p>OAuth 2.0 device authorization flow for devices with limited input capabilities.</p>
        <a href="/device-demo" class="btn">Start Device Flow</a>
        <p class="note">⚠️ Note: Device flow may not be fully supported due to Ory configuration limitations.</p>
      </div>
      
      <div class="card">
        <h3>Client Credentials Flow</h3>
        <p>Machine-to-machine flow (no user interaction). Uses UMS token endpoint.</p>
        <a href="/client-credentials-demo" class="btn">Start Client Credentials Flow</a>
        <p class="note">Uses UMS /auth/v1/oauth-apps/token endpoint</p>
      </div>
    </div>
    
    <!-- Configuration Section -->
    <div class="section">
      <h2 class="section-title">Configuration</h2>
      <div class="card">
        <p><strong>Hydra Public URL:</strong> <code><%= hydraPublicUrl %></code></p>
        <p><strong>Client ID:</strong> <code><%= clientId || 'Not set (use env var)' %></code></p>
        <p><strong>UMS Base URL:</strong> <code><%= umsBaseUrl || 'Not set (use UMS_BASE_URL env var)' %></code></p>
        <p><strong>Port:</strong> <code><%= port %></code></p>
      </div>
    </div>
  </body>
</html>

